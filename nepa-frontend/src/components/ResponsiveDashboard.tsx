import React, { useState, useEffect, useRef } from 'react';\nimport { Menu, X, Home, FileText, CreditCard, Settings, Bell, User, Search, Filter, Download, ChevronLeft, ChevronRight, LogOut, BarChart3, TrendingUp, Users, DollarSign } from 'lucide-react';\n\ninterface DashboardProps {\n  user?: {\n    name: string;\n    email: string;\n    avatar?: string;\n  };\n  className?: string;\n}\n\ninterface SidebarItem {\n  id: string;\n  label: string;\n  icon: React.ReactNode;\n  badge?: number;\n  children?: SidebarItem[];\n}\n\ninterface DashboardStats {\n  totalRevenue: number;\n  activeUsers: number;\n  totalBills: number;\n  pendingPayments: number;\n  monthlyGrowth: number;\n  weeklyActivity: number;\n}\n\nexport const ResponsiveDashboard: React.FC<DashboardProps> = ({\n  user = { name: 'John Doe', email: 'john@example.com' },\n  className = ''\n}) => {\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  const [activeItem, setActiveItem] = useState('dashboard');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedPeriod, setSelectedPeriod] = useState('week');\n  const [screenSize, setScreenSize] = useState<'mobile' | 'tablet' | 'desktop'>('desktop');\n  const sidebarRef = useRef<HTMLDivElement>(null);\n\n  // Detect screen size\n  useEffect(() => {\n    const handleResize = () => {\n      const width = window.innerWidth;\n      if (width < 768) {\n        setScreenSize('mobile');\n        setIsCollapsed(true);\n      } else if (width < 1024) {\n        setScreenSize('tablet');\n        setIsCollapsed(false);\n      } else {\n        setScreenSize('desktop');\n        setIsCollapsed(false);\n      }\n    };\n\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Close sidebar when clicking outside on mobile\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (screenSize === 'mobile' && \n          sidebarRef.current && \n          !sidebarRef.current.contains(event.target as Node)) {\n        setIsSidebarOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [screenSize]);\n\n  const sidebarItems: SidebarItem[] = [\n    {\n      id: 'dashboard',\n      label: 'Dashboard',\n      icon: <Home className=\"w-5 h-5\" />\n    },\n    {\n      id: 'bills',\n      label: 'Bills',\n      icon: <FileText className=\"w-5 h-5\" />,\n      badge: 3\n    },\n    {\n      id: 'payments',\n      label: 'Payments',\n      icon: <CreditCard className=\"w-5 h-5\" />,\n      badge: 7\n    },\n    {\n      id: 'analytics',\n      label: 'Analytics',\n      icon: <BarChart3 className=\"w-5 h-5\" />\n    },\n    {\n      id: 'users',\n      label: 'Users',\n      icon: <Users className=\"w-5 h-5\" />\n    },\n    {\n      id: 'settings',\n      label: 'Settings',\n      icon: <Settings className=\"w-5 h-5\" />\n    }\n  ];\n\n  const mockStats: DashboardStats = {\n    totalRevenue: 125430,\n    activeUsers: 2847,\n    totalBills: 1247,\n    pendingPayments: 89,\n    monthlyGrowth: 12.5,\n    weeklyActivity: 342\n  };\n\n  const formatCurrency = (amount: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD'\n    }).format(amount);\n  };\n\n  const formatNumber = (num: number) => {\n    if (num >= 1000000) {\n      return (num / 1000000).toFixed(1) + 'M';\n    } else if (num >= 1000) {\n      return (num / 1000).toFixed(1) + 'K';\n    }\n    return num.toString();\n  };\n\n  const StatCard = ({ \n    title, \n    value, \n    change, \n    icon, \n    color \n  }: { \n    title: string; \n    value: string | number; \n    change?: number; \n    icon: React.ReactNode; \n    color: string;\n  }) => (\n    <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6\">\n      <div className=\"flex items-center justify-between mb-2\">\n        <div className={`p-2 rounded-lg ${color}`}>\n          {icon}\n        </div>\n        {change !== undefined && (\n          <div className={`flex items-center text-sm font-medium ${\n            change >= 0 ? 'text-green-600' : 'text-red-600'\n          }`}>\n            <TrendingUp className=\"w-4 h-4 mr-1\" />\n            {Math.abs(change)}%\n          </div>\n        )}\n      </div>\n      <div className=\"text-2xl md:text-3xl font-bold text-gray-900 mb-1\">\n        {value}\n      </div>\n      <div className=\"text-sm text-gray-500\">{title}</div>\n    </div>\n  );\n\n  const renderSidebar = () => (\n    <div\n      ref={sidebarRef}\n      className={`\n        fixed md:static inset-y-0 left-0 z-50\n        bg-white border-r border-gray-200\n        transform transition-transform duration-300 ease-in-out\n        ${isSidebarOpen || screenSize !== 'mobile' ? 'translate-x-0' : '-translate-x-full'}\n        ${isCollapsed && screenSize !== 'mobile' ? 'w-16' : 'w-64'}\n        ${screenSize === 'mobile' ? 'w-64' : ''}\n      `}\n    >\n      {/* Sidebar Header */}\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n        {!isCollapsed || screenSize === 'mobile' ? (\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center\">\n              <span className=\"text-white font-bold text-sm\">N</span>\n            </div>\n            {(screenSize !== 'mobile' || !isCollapsed) && (\n              <span className=\"font-semibold text-gray-900\">NEPA</span>\n            )}\n          </div>\n        ) : (\n          <div className=\"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center mx-auto\">\n            <span className=\"text-white font-bold text-sm\">N</span>\n          </div>\n        )}\n        \n        {screenSize === 'mobile' && (\n          <button\n            onClick={() => setIsSidebarOpen(false)}\n            className=\"p-1 rounded-lg hover:bg-gray-100\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        )}\n        \n        {screenSize !== 'mobile' && (\n          <button\n            onClick={() => setIsCollapsed(!isCollapsed)}\n            className=\"p-1 rounded-lg hover:bg-gray-100 hidden md:block\"\n          >\n            <ChevronLeft className={`w-5 h-5 transform transition-transform ${\n              isCollapsed ? 'rotate-180' : ''\n            }`} />\n          </button>\n        )}\n      </div>\n\n      {/* Navigation */}\n      <nav className=\"flex-1 p-4\">\n        <ul className=\"space-y-2\">\n          {sidebarItems.map((item) => (\n            <li key={item.id}>\n              <button\n                onClick={() => {\n                  setActiveItem(item.id);\n                  if (screenSize === 'mobile') {\n                    setIsSidebarOpen(false);\n                  }\n                }}\n                className={`\n                  w-full flex items-center justify-between\n                  px-3 py-2 rounded-lg transition-colors\n                  ${activeItem === item.id \n                    ? 'bg-blue-50 text-blue-600' \n                    : 'text-gray-700 hover:bg-gray-100'\n                  }\n                  ${isCollapsed && screenSize !== 'mobile' ? 'justify-center' : ''}\n                `}\n              >\n                <div className=\"flex items-center space-x-3\">\n                  {item.icon}\n                  {(!isCollapsed || screenSize === 'mobile') && (\n                    <span className=\"text-sm font-medium\">{item.label}</span>\n                  )}\n                </div>\n                {item.badge && (!isCollapsed || screenSize === 'mobile') && (\n                  <span className=\"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\n                    {item.badge}\n                  </span>\n                )}\n              </button>\n            </li>\n          ))}\n        </ul>\n      </nav>\n\n      {/* User Section */}\n      <div className=\"p-4 border-t border-gray-200\">\n        <div className={`flex items-center space-x-3 ${\n          isCollapsed && screenSize !== 'mobile' ? 'justify-center' : ''\n        }`}>\n          <div className=\"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center\">\n            <User className=\"w-5 h-5 text-gray-600\" />\n          </div>\n          {(!isCollapsed || screenSize === 'mobile') && (\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"text-sm font-medium text-gray-900 truncate\">\n                {user.name}\n              </div>\n              <div className=\"text-xs text-gray-500 truncate\">\n                {user.email}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderHeader = () => (\n    <header className=\"bg-white border-b border-gray-200 px-4 py-3 md:px-6 md:py-4\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          {/* Mobile Menu Toggle */}\n          <button\n            onClick={() => setIsSidebarOpen(true)}\n            className=\"p-2 rounded-lg hover:bg-gray-100 md:hidden\"\n          >\n            <Menu className=\"w-5 h-5\" />\n          </button>\n\n          {/* Search Bar */}\n          <div className=\"relative hidden md:block\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64 lg:w-80\"\n            />\n          </div>\n        </div>\n\n        <div className=\"flex items-center space-x-3\">\n          {/* Period Selector */}\n          <select\n            value={selectedPeriod}\n            onChange={(e) => setSelectedPeriod(e.target.value)}\n            className=\"hidden sm:block px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm\"\n          >\n            <option value=\"day\">Today</option>\n            <option value=\"week\">This Week</option>\n            <option value=\"month\">This Month</option>\n            <option value=\"year\">This Year</option>\n          </select>\n\n          {/* Notifications */}\n          <button className=\"relative p-2 rounded-lg hover:bg-gray-100\">\n            <Bell className=\"w-5 h-5\" />\n            <span className=\"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full\"></span>\n          </button>\n\n          {/* User Menu */}\n          <div className=\"hidden sm:block\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"text-right\">\n                <div className=\"text-sm font-medium text-gray-900\">{user.name}</div>\n                <div className=\"text-xs text-gray-500\">{user.email}</div>\n              </div>\n              <div className=\"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center\">\n                <User className=\"w-5 h-5 text-gray-600\" />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n\n  const renderMainContent = () => (\n    <main className=\"flex-1 overflow-y-auto\">\n      <div className=\"p-4 md:p-6 lg:p-8\">\n        {/* Page Title */}\n        <div className=\"mb-6 md:mb-8\">\n          <h1 className=\"text-2xl md:text-3xl font-bold text-gray-900 mb-2\">\n            Dashboard Overview\n          </h1>\n          <p className=\"text-gray-600\">\n            Welcome back, {user.name}. Here's what's happening with your business today.\n          </p>\n        </div>\n\n        {/* Stats Grid */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8\">\n          <StatCard\n            title=\"Total Revenue\"\n            value={formatCurrency(mockStats.totalRevenue)}\n            change={mockStats.monthlyGrowth}\n            icon={<DollarSign className=\"w-6 h-6 text-white\" />}\n            color=\"bg-blue-500\"\n          />\n          <StatCard\n            title=\"Active Users\"\n            value={formatNumber(mockStats.activeUsers)}\n            change={8.2}\n            icon={<Users className=\"w-6 h-6 text-white\" />}\n            color=\"bg-green-500\"\n          />\n          <StatCard\n            title=\"Total Bills\"\n            value={formatNumber(mockStats.totalBills)}\n            change={-2.1}\n            icon={<FileText className=\"w-6 h-6 text-white\" />}\n            color=\"bg-purple-500\"\n          />\n          <StatCard\n            title=\"Pending Payments\"\n            value={formatNumber(mockStats.pendingPayments)}\n            change={5.7}\n            icon={<CreditCard className=\"w-6 h-6 text-white\" />}\n            color=\"bg-orange-500\"\n          />\n        </div>\n\n        {/* Charts Section */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6 md:mb-8\">\n          {/* Revenue Chart */}\n          <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">Revenue Trend</h2>\n              <button className=\"p-2 hover:bg-gray-100 rounded-lg\">\n                <Download className=\"w-4 h-4\" />\n              </button>\n            </div>\n            <div className=\"h-64 flex items-center justify-center bg-gray-50 rounded-lg\">\n              <div className=\"text-center\">\n                <BarChart3 className=\"w-12 h-12 text-gray-400 mx-auto mb-2\" />\n                <p className=\"text-gray-500\">Revenue chart will be displayed here</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Activity Chart */}\n          <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4 md:p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">Weekly Activity</h2>\n              <button className=\"p-2 hover:bg-gray-100 rounded-lg\">\n                <Filter className=\"w-4 h-4\" />\n              </button>\n            </div>\n            <div className=\"h-64 flex items-center justify-center bg-gray-50 rounded-lg\">\n              <div className=\"text-center\">\n                <TrendingUp className=\"w-12 h-12 text-gray-400 mx-auto mb-2\" />\n                <p className=\"text-gray-500\">Activity chart will be displayed here</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Recent Activity Table */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n          <div className=\"px-4 py-4 border-b border-gray-200 sm:px-6\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">Recent Activity</h2>\n          </div>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Transaction\n                  </th>\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell\">\n                    Customer\n                  </th>\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Amount\n                  </th>\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell\">\n                    Status\n                  </th>\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Date\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {[1, 2, 3, 4, 5].map((item) => (\n                  <tr key={item} className=\"hover:bg-gray-50\">\n                    <td className=\"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                      Invoice #{1000 + item}\n                    </td>\n                    <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500 hidden sm:table-cell\">\n                      Customer {item}\n                    </td>\n                    <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {formatCurrency(100 * item)}\n                    </td>\n                    <td className=\"px-4 py-4 whitespace-nowrap hidden md:table-cell\">\n                      <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\n                        item % 2 === 0 \n                          ? 'bg-green-100 text-green-800' \n                          : 'bg-yellow-100 text-yellow-800'\n                      }`}>\n                        {item % 2 === 0 ? 'Paid' : 'Pending'}\n                      </span>\n                    </td>\n                    <td className=\"px-4 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {new Date().toLocaleDateString()}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n\n  return (\n    <div className={`min-h-screen bg-gray-50 ${className}`}>\n      {/* Mobile Overlay */}\n      {screenSize === 'mobile' && isSidebarOpen && (\n        <div \n          className=\"fixed inset-0 bg-black bg-opacity-50 z-40\"\n          onClick={() => setIsSidebarOpen(false)}\n        />\n      )}\n\n      {/* Sidebar */}\n      {renderSidebar()}\n\n      {/* Main Content Area */}\n      <div className={`flex flex-col min-h-screen ${\n        screenSize !== 'mobile' ? (isCollapsed ? 'md:ml-16' : 'md:ml-64') : ''\n      }`}>\n        {/* Header */}\n        {renderHeader()}\n\n        {/* Main Content */}\n        {renderMainContent()}\n      </div>\n    </div>\n  );\n};
